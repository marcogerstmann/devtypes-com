{"componentChunkName":"component---src-templates-post-tsx","path":"/testcafe-mock-current-date","result":{"data":{"markdownRemark":{"id":"4bf427ad-a8e3-5284-845d-76f384d4c787","html":"<p>I recently had to set up E2E testing with TestCafe for a web application whose state depended heavily on the current system time.</p>\n<p>To keep the test results consistent, I wanted the tests to always be operated with the exact same date. I wanted to mock the current date for the TestCafe tests.</p>\n<p>I had some hope that TestCafe had something built in like the Cypress <code class=\"language-text\">cy.clock()</code> function. But unfortunately there is nothing like that.</p>\n<p>So I spent a decent amount of time finding a way to mock the current date with TestCafe. And I thought it was worth to document my solution here on my blog for your advantage.</p>\n<p>For this little tutorial, please refer to the following basic folder structure, where the testcafe folder is placed inside an Angular project:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.\n+-- testcafe\n|   +-- scripts\n|       +-- mockDate.js\n|   +-- tests\n|       +-- test-case.spec.js\n|       +-- another-test-case.spec.js\n+-- .testcaferc.json\n+-- package.json</code></pre></div>\n<p>The important files for this tutorial are <code class=\"language-text\">mockDate.js</code> and <code class=\"language-text\">.testcaferc.json</code>.</p>\n<p>First of all you need to install the packages for TestCafe itself and a package called \"mockdate\".</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install testcafe mockdate --save-dev``</code></pre></div>\n<p>After this is done, please create the file <code class=\"language-text\">mockDate.js</code> and just put one single line into it:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">window<span class=\"token punctuation\">.</span>MockDate<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2019-02-15 08:30'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// YYYY-MM-DD HH:mm</span></code></pre></div>\n<p>The next step is to tell TestCafe needs to inject the necessary scripts into the client (the browser). This is necessary because TestCafe itself runs inside a Node.js environment and thus is server side.</p>\n<p>To tell TestCafe to include our necessary scripts for mocking the current date, just write the following lines into the <code class=\"language-text\">.testcaferc.json</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"clientScripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"node_modules/mockdate/src/mockdate.js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"testcafe/scripts/mockDate.js\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>IMPORTANT: The <code class=\"language-text\">.testcaferc.json</code> file must be placed into the root directory of the project. This is the same level as the <code class=\"language-text\">package.json</code> file. With this, TestCafe will automatically recognize and process the configurations placed here.</p>\n<p>That’s it! With this easy configuration you can be sure that your TestCafe E2E tests are always running with the same date and time.</p>","excerpt":"I recently had to set up E2E testing with TestCafe for a web application whose state depended heavily on the current system time. To keep the test…","frontmatter":{"date":"November 30, 2019","slug":"/testcafe-mock-current-date","title":"Mock Current Date in TestCafe: A concrete example","description":"Unfortunately TestCafe does not have a built in functionality to mock the current date. Read here how to achieve that anyway.","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHNmRXB/8QAFxABAQEBAAAAAAAAAAAAAAAAATEDEf/aAAgBAQABBQJgZ9b/AP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAMBAQAAAAAAAAAAAAAAAAABIRFB/9oACAEBAAY/AoLXwh//xAAaEAACAwEBAAAAAAAAAAAAAAABEQAhMUFR/9oACAEBAAE/IRB0l0gNL2I3Dqf/2gAMAwEAAgADAAAAEI/v/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QZ//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/ECf/xAAaEAEBAAMBAQAAAAAAAAAAAAABEQAhQWEx/9oACAEBAAE/ENAyFbHzhjCtS0t3h81zCTVtXl1n/9k=","aspectRatio":2.573529411764706,"src":"/devtypes-com/static/72ac2c28aab51604516162e17bbdc14f/1a4d5/testcafe-mock-date.jpg","srcSet":"/devtypes-com/static/72ac2c28aab51604516162e17bbdc14f/3ad57/testcafe-mock-date.jpg 350w,\n/devtypes-com/static/72ac2c28aab51604516162e17bbdc14f/79ba3/testcafe-mock-date.jpg 700w,\n/devtypes-com/static/72ac2c28aab51604516162e17bbdc14f/06051/testcafe-mock-date.jpg 1050w,\n/devtypes-com/static/72ac2c28aab51604516162e17bbdc14f/b7743/testcafe-mock-date.jpg 1400w,\n/devtypes-com/static/72ac2c28aab51604516162e17bbdc14f/1a4d5/testcafe-mock-date.jpg 1600w","sizes":"(max-width: 1600px) 100vw, 1600px","maxHeight":621,"maxWidth":1600},"sizes":{"src":"/devtypes-com/static/72ac2c28aab51604516162e17bbdc14f/14b42/testcafe-mock-date.jpg"}}}}}},"pageContext":{"id":"4bf427ad-a8e3-5284-845d-76f384d4c787","slug":"/testcafe-mock-current-date","previous":null,"next":{"id":"496ae08c-b536-553c-8f34-483252fe1619","frontmatter":{"slug":"/inbox-zero","template":"post","title":"Gain more clarity with Inbox Zero (not only for emails)"}}}},"staticQueryHashes":["1603267538","3594255300","4267595483"]}